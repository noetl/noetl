apiVersion: v1
data:
  README.md: "# Gateway UI Test Fixtures\n\nStatic UI files for testing the NoETL Gateway authentication and GraphQL integration.\n\n## Files\n\n- `index.html` - Main application page (flight search demo)\n- `login.html` - Authentication login page\n- `app.js` - Main application logic with GraphQL integration\n- `auth.js` - Authentication utilities (session management, token validation)\n- `styles.css` - Shared styles for UI\n\n## Features\n\n- \U0001F510 Auth0 authentication integration\n- \U0001F3A8 Beautiful gradient design (purple/blue theme)\n- \U0001F4AC Real-time chat interface with typing indicators\n- ✈️ Flight search with Amadeus AI API\n- \U0001F4F1 Fully responsive (mobile and desktop)\n- \U0001F3AD Smooth animations and transitions\n- ⚡ GraphQL integration with error handling\n- \U0001F512 Session-based access control\n\n## How It Works\n\nThese are **pure static files** (HTML/JS/CSS) that connect to the Gateway API via JavaScript fetch calls.\n\nThe JavaScript files make HTTP\
    \ requests to:\n- `http://localhost:8090/api/auth/*` - Authentication endpoints\n- `http://localhost:8090/graphql` - GraphQL endpoint\n\n**You can serve these files any way you want:**\n\n### Local Development Options\n\n**Option 1: Python (Quick & Easy)**\n```bash\ncd tests/fixtures/gateway_ui\npython3 -m http.server 8080\n```\n\n**Option 2: Node.js**\n```bash\nnpx http-server -p 8080 --cors\n```\n\nThe UI connects to the Gateway API. Update these URLs if needed:\n\n**For local development with different ports:**\n\nIn `auth.js`:\n```javascript\n// Change this if gateway is on different port/host\nconst API_BASE = 'http://localhost:8090'; // Gateway API URL\n```\n\nIn `app.js`:\n```javascript\n// Uses authenticatedGraphQL from auth.js which calls ${API_BASE}/graphql\n```\n\n**For production:**\n```javascript\nconst API_BASE = 'https://api.yourdomain.com'; // Your production gateway\n```\n\nThe HTML/JS files are **completely separate** from the gateway - they're just a frontend that\
    \ makes API calls.n tests/fixtures/gateway_ui/login.html\n# or double-click login.html in Finder\n```\n⚠️ Note: Opening as `file://` may cause CORS issues. Use HTTP server for full functionality.\n\n### Production Deployment\n\nIn production, serve these files with:\n- **Nginx** - Standard web server\n- **Apache** - Traditional web server  \n- **CDN** - CloudFront, Cloudflare, Fastly\n- **Object Storage** - S3 + CloudFront, GCS, Azure Blob\n- **Vercel/Netlify** - Serverless static hosting\n\nThen update `API_BASE` in `auth.js` to point to your gateway URL.\n\n## Configuration\n\nUpdate the API base URL if your gateway runs on a different port:\n\nIn `auth.js`:\n```javascript\nconst API_BASE = window.location.origin; // Or 'http://localhost:8090'\n```\n\n## Gateway Integration\n\nThe UI communicates with these Gateway endpoints:\n\n- `POST /api/auth/login` - Auth0 login\n- `POST /api/auth/validate` - Session validation\n- `POST /api/auth/check-access` - Permission checking\n- `POST /graphql`\
    \ - Protected GraphQL endpoint (requires authentication)\n\n## Testing Flow\n\n1. **Start Gateway**: `cd gateway && cargo run --release`\n2. **Start UI server**: `cd tests/fixtures/gateway_ui && python3 -m http.server 8080`\n3. **Open browser**: `http://localhost:8080/login.html`\n4. **Login**: Use Auth0 token or test session token\n5. **Test flight search**: Query flights on main page\n\n## Creating Test Session\n\n```sql\n-- Connect to PostgreSQL\npsql -h localhost -p 54321 -U demo -d demo_noetl\n\n-- Create test user and session\nINSERT INTO auth.users (auth0_id, email, display_name, is_active)\nVALUES ('auth0|test123', 'test@example.com', 'Test User', true)\nRETURNING user_id;\n\n-- Grant admin role (use user_id from above)\nINSERT INTO auth.user_roles (user_id, role_id)\nSELECT 1, role_id FROM auth.roles WHERE role_name = 'admin';\n\n-- Create test session (expires in 8 hours)\nINSERT INTO auth.sessions (user_id, session_token, expires_at)\nVALUES (1, 'test-session-token-12345',\
    \ NOW() + INTERVAL '8 hours')\nRETURNING session_token;\n```\n\nUse the returned `session_token` for direct login testing.\n\n## GraphQL Integration\n\nThe interface uses this mutation:\n\n```graphql\nmutation ExecuteAmadeus($name: String!, $vars: JSON) {\n  executePlaybook(name: $name, variables: $vars) {\n    id\n    name\n    status\n    textOutput\n  }\n}\n```\n\nWith variables:\n```json\n{\n  \"name\": \"api_integration/amadeus_ai_api\",\n  \"vars\": {\n    \"query\": \"User's flight search query\"\n  }\n}\n```\n\n## Usage\n\n### Option 1: Serve with your Rust application\n\nAdd to your `main.rs`:\n\n```rust\nuse axum::{\n    Router,\n    routing::get_service,\n};\nuse tower_http::services::ServeDir;\n\nlet app = Router::new()\n    .nest_service(\"/\", ServeDir::new(\"static\"));\n```\n\n### Option 2: Simple HTTP server\n\n```bash\n# Using Python\ncd static\npython3 -m http.server 8000\n\n# Or using Node.js\nnpx http-server static -p 8000\n```\n\nThen open: http://localhost:8000\n\
    \n## Customization\n\n### Colors\n\nEdit CSS variables in `styles.css`:\n\n```css\n:root {\n    --primary-color: #667eea;\n    --secondary-color: #764ba2;\n    /* ... more colors */\n}\n```\n\n### Suggestions\n\nEdit suggestion chips in `index.html`:\n\n```html\n<button class=\"suggestion-chip\" onclick=\"sendSuggestion('Your custom query')\">\n    Your button text\n</button>\n```\n\n### GraphQL Endpoint\n\nThe default endpoint is `/graphql`. Update in `app.js` if different:\n\n```javascript\nconst GRAPHQL_ENDPOINT = 'http://your-server:port/graphql';\n```\n\n## Browser Support\n\n- Chrome/Edge (latest)\n- Firefox (latest)\n- Safari (latest)\n- Mobile browsers (iOS Safari, Chrome Mobile)\n\n## Features Breakdown\n\n### User Interface\n- Gradient header with avatar icon\n- Chat bubbles with timestamps\n- Typing indicator animation\n- Error messages with icons\n- Execution status badges\n\n### Functionality\n- Send text queries\n- Quick suggestion buttons\n- Real-time GraphQL queries\n\
    - Response formatting (markdown-like)\n- Auto-scroll to latest message\n- Input validation\n- Loading states\n\n## Example Queries\n\nTry these in the chat:\n- \"I want a one-way flight from SFO to JFK on March 15, 2026 for 1 adult\"\n- \"Show me flights from LAX to Miami next week for 2 passengers\"\n- \"I need a round trip from New York to London in April\"\n- \"Find flights from Chicago to Paris on June 10th\"\n\n## Troubleshooting\n\n### CORS Issues\nIf you get CORS errors, ensure your server allows requests from the origin serving the HTML:\n\n```rust\n// Add CORS middleware in your Rust application\nuse tower_http::cors::CorsLayer;\n\nlet app = Router::new()\n    .layer(CorsLayer::permissive());\n```\n\n### GraphQL Errors\nCheck browser console for detailed error messages. The chat will display user-friendly error messages.\n\n### Styling Issues\nClear browser cache if styles don't update after changes.\n"
  app.js: "// Configuration\nconst PLAYBOOK_NAME = 'api_integration/amadeus_ai_api';\n\n// DOM Elements\nconst chatContainer = document.getElementById('chatContainer');\nconst chatForm = document.getElementById('chatForm');\nconst chatInput = document.getElementById('chatInput');\nconst sendButton = document.getElementById('sendButton');\n\n// State\nlet isProcessing = false;\n\n// Initialize\ndocument.addEventListener('DOMContentLoaded', () => {\n  chatForm.addEventListener('submit', handleSubmit);\n  chatInput.addEventListener('input', handleInputChange);\n});\n\n// Handle form submission\nasync function handleSubmit(e) {\n  e.preventDefault();\n\n  const query = chatInput.value.trim();\n  if (!query || isProcessing) return;\n\n  // Check playbook access before execution\n  const hasAccess = await checkPlaybookAccess(PLAYBOOK_NAME, 'execute');\n  if (!hasAccess) {\n    addErrorMessage('You do not have permission to execute this playbook. Please contact your administrator.');\n    return;\n\
    \  }\n\n  // Clear input\n  chatInput.value = '';\n\n  // Hide welcome message if it exists\n  const welcomeMessage = chatContainer.querySelector('.welcome-message');\n  if (welcomeMessage) {\n    welcomeMessage.remove();\n  }\n\n  // Add user message\n  addMessage(query, 'user');\n\n  // Show typing indicator\n  const typingIndicator = addTypingIndicator();\n\n  // Disable input\n  setProcessing(true);\n\n  try {\n    // Execute GraphQL mutation with authentication\n    const result = await executePlaybook(query);\n\n    // Remove typing indicator\n    typingIndicator.remove();\n\n    // Add assistant response\n    if (result.textOutput) {\n      addMessage(result.textOutput, 'assistant', result);\n    } else {\n      addMessage('I received your request but got no response. Please try again.', 'assistant', result);\n    }\n  } catch (error) {\n    console.error('Error executing playbook:', error);\n    typingIndicator.remove();\n    \n    if (error.message === 'Session expired' || error.message\
    \ === 'Not authenticated') {\n      addErrorMessage('Your session has expired. Redirecting to login...');\n      setTimeout(() => {\n        redirectToLogin();\n      }, 2000);\n    } else {\n      addErrorMessage(error.message || 'Failed to process your request. Please try again.');\n    }\n  } finally {\n    setProcessing(false);\n  }\n}\n\n// Execute GraphQL mutation with authentication\nasync function executePlaybook(query) {\n  const mutation = `\n        mutation ExecuteAmadeus($name: String!, $vars: JSON) {\n            executePlaybook(name: $name, variables: $vars) {\n                id\n                name\n                status\n                textOutput\n            }\n        }\n    `;\n\n  const variables = {\n    name: PLAYBOOK_NAME,\n    vars: {\n      query: query\n    }\n  };\n\n  // Use authenticated GraphQL function from auth.js\n  const data = await authenticatedGraphQL(mutation, variables);\n  return data.executePlaybook;\n}\n\n// Add message to chat\nfunction\
    \ addMessage(text, role, executionData = null) {\n  const messageDiv = document.createElement('div');\n  messageDiv.className = `message ${role}`;\n\n  const contentDiv = document.createElement('div');\n  contentDiv.className = 'message-content';\n\n  const textDiv = document.createElement('div');\n  textDiv.className = 'message-text';\n\n  // Format the text (convert markdown-like syntax to HTML)\n  textDiv.innerHTML = formatMessage(text);\n\n  contentDiv.appendChild(textDiv);\n\n  // Add timestamp\n  const timeDiv = document.createElement('div');\n  timeDiv.className = 'message-time';\n  timeDiv.textContent = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\n  contentDiv.appendChild(timeDiv);\n\n  // Add execution info for assistant messages\n  if (role === 'assistant' && executionData) {\n    const infoDiv = document.createElement('div');\n    infoDiv.className = 'execution-info';\n\n    const statusBadge = document.createElement('span');\n    statusBadge.className\
    \ = `status-badge ${executionData.status.toLowerCase()}`;\n    statusBadge.textContent = executionData.status;\n\n    infoDiv.innerHTML = `Execution ID: ${executionData.id}`;\n    infoDiv.appendChild(statusBadge);\n    contentDiv.appendChild(infoDiv);\n  }\n\n  messageDiv.appendChild(contentDiv);\n  chatContainer.appendChild(messageDiv);\n\n  // Scroll to bottom\n  scrollToBottom();\n}\n\n// Format message text (simple markdown-like formatting)\nfunction formatMessage(text) {\n  if (!text) return '';\n\n  // Escape HTML\n  text = text.replace(/</g, '&lt;').replace(/>/g, '&gt;');\n\n  // Convert markdown headers\n  text = text.replace(/^### (.*$)/gim, '<h3>$1</h3>');\n  text = text.replace(/^## (.*$)/gim, '<h3>$1</h3>');\n\n  // Convert bold\n  text = text.replace(/\\*\\*(.*?)\\*\\*/g, '<strong>$1</strong>');\n\n  // Convert line breaks\n  text = text.replace(/\\n\\n/g, '</p><p>');\n  text = text.replace(/\\n/g, '<br>');\n\n  // Wrap in paragraph if not already wrapped\n  if (!text.startsWith('<h3>')\
    \ && !text.startsWith('<p>')) {\n    text = '<p>' + text + '</p>';\n  }\n\n  return text;\n}\n\n// Add typing indicator\nfunction addTypingIndicator() {\n  const messageDiv = document.createElement('div');\n  messageDiv.className = 'message assistant typing';\n\n  const indicatorDiv = document.createElement('div');\n  indicatorDiv.className = 'typing-indicator';\n\n  for (let i = 0; i < 3; i++) {\n    const dot = document.createElement('div');\n    dot.className = 'typing-dot';\n    indicatorDiv.appendChild(dot);\n  }\n\n  messageDiv.appendChild(indicatorDiv);\n  chatContainer.appendChild(messageDiv);\n\n  scrollToBottom();\n\n  return messageDiv;\n}\n\n// Add error message\nfunction addErrorMessage(message) {\n  const errorDiv = document.createElement('div');\n  errorDiv.className = 'error-message';\n  errorDiv.innerHTML = `\n        <span class=\"error-icon\">⚠️</span>\n        <span>${message}</span>\n    `;\n  chatContainer.appendChild(errorDiv);\n  scrollToBottom();\n}\n\n// Handle\
    \ input change\nfunction handleInputChange() {\n  const hasValue = chatInput.value.trim().length > 0;\n  sendButton.disabled = !hasValue || isProcessing;\n}\n\n// Set processing state\nfunction setProcessing(processing) {\n  isProcessing = processing;\n  chatInput.disabled = processing;\n  sendButton.disabled = processing;\n\n  if (processing) {\n    chatInput.placeholder = 'Processing...';\n  } else {\n    chatInput.placeholder = \"Ask about flights, e.g., 'I want to fly from SFO to JFK tomorrow'\";\n    chatInput.focus();\n  }\n}\n\n// Scroll to bottom of chat\nfunction scrollToBottom() {\n  chatContainer.scrollTop = chatContainer.scrollHeight;\n}\n\n// Send suggestion\nfunction sendSuggestion(text) {\n  chatInput.value = text;\n  handleInputChange();\n  chatForm.dispatchEvent(new Event('submit'));\n}\n\n// Make sendSuggestion available globally for onclick handlers\nwindow.sendSuggestion = sendSuggestion;\n"
  auth.js: "// Authentication utilities for Gateway UI\n\nconst API_BASE = window.location.origin;\nconst AUTH_VALIDATE_URL = `${API_BASE}/api/auth/validate`;\nconst AUTH_CHECK_ACCESS_URL = `${API_BASE}/api/auth/check-access`;\n\n// Check authentication on page load\nwindow.addEventListener('DOMContentLoaded', async () => {\n  await checkAuth();\n});\n\n/**\n * Check if user is authenticated, redirect to login if not\n */\nasync function checkAuth() {\n  const token = getSessionToken();\n\n  if (!token) {\n    redirectToLogin();\n    return false;\n  }\n\n  const valid = await validateSession(token);\n\n  if (!valid) {\n    clearAuth();\n    redirectToLogin();\n    return false;\n  }\n\n  // Display user info\n  displayUserInfo();\n  return true;\n}\n\n/**\n * Get session token from localStorage\n */\nfunction getSessionToken() {\n  return localStorage.getItem('session_token');\n}\n\n/**\n * Get user info from localStorage\n */\nfunction getUserInfo() {\n  const userStr = localStorage.getItem('user_info');\n\
    \  if (!userStr) return null;\n\n  try {\n    return JSON.parse(userStr);\n  } catch (e) {\n    console.error('Failed to parse user info:', e);\n    return null;\n  }\n}\n\n/**\n * Validate session token with backend\n */\nasync function validateSession(token) {\n  try {\n    const response = await fetch(AUTH_VALIDATE_URL, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        session_token: token,\n      }),\n    });\n\n    if (!response.ok) {\n      console.error('Session validation failed:', response.status);\n      return false;\n    }\n\n    const data = await response.json();\n\n    if (data.valid && data.user) {\n      // Update user info if returned\n      localStorage.setItem('user_info', JSON.stringify(data.user));\n      return true;\n    }\n\n    return false;\n  } catch (error) {\n    console.error('Session validation error:', error);\n    return false;\n  }\n}\n\n/**\n * Check if user has\
    \ access to execute a playbook\n */\nasync function checkPlaybookAccess(playbookPath, permissionType = 'execute') {\n  const token = getSessionToken();\n\n  if (!token) {\n    return false;\n  }\n\n  try {\n    const response = await fetch(AUTH_CHECK_ACCESS_URL, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        session_token: token,\n        playbook_path: playbookPath,\n        permission_type: permissionType,\n      }),\n    });\n\n    if (!response.ok) {\n      console.error('Access check failed:', response.status);\n      return false;\n    }\n\n    const data = await response.json();\n    return data.allowed || false;\n  } catch (error) {\n    console.error('Access check error:', error);\n    return false;\n  }\n}\n\n/**\n * Display user information in header\n */\nfunction displayUserInfo() {\n  const user = getUserInfo();\n  if (!user) return;\n\n  const userDisplay = document.getElementById('userDisplay');\n\
    \  if (userDisplay) {\n    userDisplay.textContent = user.display_name || user.email;\n  }\n\n  // Setup logout button\n  const logoutBtn = document.getElementById('logoutBtn');\n  if (logoutBtn) {\n    logoutBtn.addEventListener('click', logout);\n  }\n}\n\n/**\n * Logout user\n */\nfunction logout() {\n  clearAuth();\n  redirectToLogin();\n}\n\n/**\n * Clear authentication data\n */\nfunction clearAuth() {\n  localStorage.removeItem('session_token');\n  localStorage.removeItem('user_info');\n}\n\n/**\n * Redirect to login page\n */\nfunction redirectToLogin() {\n  window.location.href = '/static/login.html';\n}\n\n/**\n * Make authenticated GraphQL request\n */\nasync function authenticatedGraphQL(query, variables) {\n  const token = getSessionToken();\n\n  if (!token) {\n    throw new Error('Not authenticated');\n  }\n\n  const response = await fetch(`${API_BASE}/graphql`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer\
    \ ${token}`,\n    },\n    body: JSON.stringify({\n      query,\n      variables,\n    }),\n  });\n\n  if (response.status === 401) {\n    // Session expired, redirect to login\n    clearAuth();\n    redirectToLogin();\n    throw new Error('Session expired');\n  }\n\n  if (!response.ok) {\n    throw new Error(`GraphQL request failed: ${response.status}`);\n  }\n\n  const data = await response.json();\n\n  if (data.errors) {\n    throw new Error(data.errors[0].message || 'GraphQL error');\n  }\n\n  return data.data;\n}\n"
  config.js: "// Auth0 Configuration\n// Update this file to change Auth0 settings\nconst auth0Config = {\n  domain: 'mestumre-development.us.auth0.com',\n  clientId: 'Jqop7YoaiZalLHdBRo5ScNQ1RJhbhbDN',\n  redirectUri: window.location.origin || 'http://localhost:8080'\n};\n"
  dashboard.html: "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>NoETL Gateway - Dashboard</title>\n  <script src=\"/config.js\"></script>\n  <style>\n    * {\n      margin: 0;\n      padding: 0;\n      box-sizing: border-box;\n    }\n\n    body {\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;\n      background: #f7fafc;\n      color: #2d3748;\n    }\n\n    .header {\n      background: white;\n      border-bottom: 1px solid #e2e8f0;\n      padding: 1rem 2rem;\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n    }\n\n    .header-left {\n      display: flex;\n      align-items: center;\n      gap: 1rem;\n    }\n\n    .logo {\n      width: 40px;\n      height: 40px;\n      background: linear-gradient(135deg, #667eea 0%, #764ba2\
    \ 100%);\n      border-radius: 8px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n    }\n\n    .logo svg {\n      width: 24px;\n      height: 24px;\n      stroke: white;\n    }\n\n    .header h1 {\n      font-size: 1.5rem;\n      font-weight: 600;\n    }\n\n    .header-right {\n      display: flex;\n      align-items: center;\n      gap: 1rem;\n    }\n\n    .user-info {\n      text-align: right;\n    }\n\n    .user-email {\n      font-size: 0.9rem;\n      color: #718096;\n    }\n\n    .btn-logout {\n      padding: 0.5rem 1rem;\n      background: #e53e3e;\n      color: white;\n      border: none;\n      border-radius: 6px;\n      cursor: pointer;\n      font-size: 0.9rem;\n      font-weight: 500;\n      transition: all 0.2s;\n    }\n\n    .btn-logout:hover {\n      background: #c53030;\n    }\n\n    .container {\n      max-width: 1200px;\n      margin: 2rem auto;\n      padding: 0 2rem;\n    }\n\n    .welcome-section {\n      background: white;\n \
    \     padding: 2rem;\n      border-radius: 12px;\n      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n      margin-bottom: 2rem;\n    }\n\n    .welcome-section h2 {\n      font-size: 1.75rem;\n      margin-bottom: 0.5rem;\n      color: #1a202c;\n    }\n\n    .welcome-section p {\n      color: #718096;\n      font-size: 1rem;\n    }\n\n    .stats-grid {\n      display: grid;\n      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n      gap: 1.5rem;\n      margin-bottom: 2rem;\n    }\n\n    .stat-card {\n      background: white;\n      padding: 1.5rem;\n      border-radius: 12px;\n      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n      border-left: 4px solid #667eea;\n    }\n\n    .stat-card h3 {\n      font-size: 0.875rem;\n      color: #718096;\n      text-transform: uppercase;\n      letter-spacing: 0.05em;\n      margin-bottom: 0.5rem;\n    }\n\n    .stat-card .value {\n      font-size: 2rem;\n      font-weight: 700;\n      color: #1a202c;\n    }\n\n    .actions-section {\n\
    \      background: white;\n      padding: 2rem;\n      border-radius: 12px;\n      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n    }\n\n    .actions-section h3 {\n      font-size: 1.25rem;\n      margin-bottom: 1.5rem;\n      color: #1a202c;\n    }\n\n    .actions-grid {\n      display: grid;\n      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n      gap: 1rem;\n    }\n\n    .action-btn {\n      padding: 1rem;\n      background: #f7fafc;\n      border: 2px solid #e2e8f0;\n      border-radius: 8px;\n      cursor: pointer;\n      transition: all 0.2s;\n      text-align: left;\n      font-size: 1rem;\n      color: #2d3748;\n      font-weight: 500;\n    }\n\n    .action-btn:hover {\n      border-color: #667eea;\n      background: #edf2f7;\n      transform: translateY(-2px);\n    }\n\n    .action-btn .icon {\n      font-size: 1.5rem;\n      margin-bottom: 0.5rem;\n    }\n\n    .session-info {\n      background: #f0fff4;\n      border: 1px solid #9ae6b4;\n      padding: 1rem;\n\
    \      border-radius: 8px;\n      margin-top: 2rem;\n      font-size: 0.9rem;\n    }\n\n    .session-info strong {\n      color: #2f855a;\n    }\n\n    .loading {\n      text-align: center;\n      padding: 3rem;\n      color: #718096;\n    }\n  </style>\n</head>\n<body>\n  <div class=\"header\">\n    <div class=\"header-left\">\n      <div class=\"logo\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n          <path d=\"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z\"></path>\n          <polyline points=\"3.27 6.96 12 12.01 20.73 6.96\"></polyline>\n          <line x1=\"12\" y1=\"22.08\" x2=\"12\" y2=\"12\"></line>\n        </svg>\n      </div>\n      <h1>NoETL Gateway</h1>\n    </div>\n    <div class=\"header-right\">\n      <div class=\"user-info\">\n        <div id=\"userName\">Loading...</div>\n        <div class=\"user-email\"\
    \ id=\"userEmail\"></div>\n      </div>\n      <button class=\"btn-logout\" onclick=\"logout()\">Logout</button>\n    </div>\n  </div>\n\n  <div class=\"container\">\n    <div id=\"loadingState\" class=\"loading\">\n      Loading your dashboard...\n    </div>\n\n    <div id=\"dashboard\" style=\"display: none;\">\n      <div class=\"welcome-section\">\n        <h2>Welcome Back!</h2>\n        <p>Your NoETL Gateway is ready to execute playbooks and manage workflows.</p>\n      </div>\n\n      <div class=\"stats-grid\">\n        <div class=\"stat-card\">\n          <h3>Session Status</h3>\n          <div class=\"value\" style=\"color: #48bb78;\">Active</div>\n        </div>\n        <div class=\"stat-card\" style=\"border-left-color: #ed8936;\">\n          <h3>Available Playbooks</h3>\n          <div class=\"value\" id=\"playbookCount\">-</div>\n        </div>\n        <div class=\"stat-card\" style=\"border-left-color: #38b2ac;\">\n          <h3>Your Roles</h3>\n          <div class=\"\
    value\" id=\"roleCount\">-</div>\n        </div>\n      </div>\n\n      <div class=\"actions-section\">\n        <h3>Quick Actions</h3>\n        <div class=\"actions-grid\">\n          <button class=\"action-btn\" onclick=\"alert('View Playbooks - Coming soon!')\">\n            <div class=\"icon\">\U0001F4CB</div>\n            View Playbooks\n          </button>\n          <button class=\"action-btn\" onclick=\"alert('Execute Playbook - Coming soon!')\">\n            <div class=\"icon\">▶️</div>\n            Execute Playbook\n          </button>\n          <button class=\"action-btn\" onclick=\"alert('View History - Coming soon!')\">\n            <div class=\"icon\">\U0001F4CA</div>\n            Execution History\n          </button>\n          <button class=\"action-btn\" onclick=\"alert('Settings - Coming soon!')\">\n            <div class=\"icon\">⚙️</div>\n            Settings\n          </button>\n        </div>\n      </div>\n\n      <div class=\"session-info\">\n        <strong>Session\
    \ Token:</strong> <span id=\"sessionToken\"></span><br>\n        <strong>Expires:</strong> <span id=\"expiresAt\">24 hours from login</span>\n      </div>\n    </div>\n  </div>\n\n  <script>\n    const NOETL_API = window.location.origin.replace(':8080', ':8082');\n\n    async function loadDashboard() {\n      const token = localStorage.getItem('session_token');\n      const userInfo = JSON.parse(localStorage.getItem('user_info') || '{}');\n\n      if (!token) {\n        window.location.href = '/login.html';\n        return;\n      }\n\n      // Show user info\n      document.getElementById('userName').textContent = userInfo.display_name || 'User';\n      document.getElementById('userEmail').textContent = userInfo.email || '';\n      document.getElementById('sessionToken').textContent = token.substring(0, 20) + '...';\n\n      // Show roles\n      const roles = userInfo.roles || ['admin'];\n      document.getElementById('roleCount').textContent = roles.length;\n\n      // Mock playbook\
    \ count\n      document.getElementById('playbookCount').textContent = '4';\n\n      // Hide loading, show dashboard\n      document.getElementById('loadingState').style.display = 'none';\n      document.getElementById('dashboard').style.display = 'block';\n    }\n\n    function logout() {\n      if (confirm('Are you sure you want to logout?')) {\n        localStorage.removeItem('session_token');\n        localStorage.removeItem('user_info');\n        window.location.href = '/login.html';\n      }\n    }\n\n    // Load dashboard on page load\n    window.addEventListener('DOMContentLoaded', loadDashboard);\n  </script>\n</body>\n</html>\n"
  index.html: "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>Cybx AI Flight Assistant</title>\n  <link rel=\"stylesheet\" href=\"/static/styles.css\">\n</head>\n\n<body>\n  <div class=\"container\">\n    <div class=\"chat-header\">\n      <div class=\"header-content\">\n        <div class=\"avatar\">\n          <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"\n            stroke-linecap=\"round\" stroke-linejoin=\"round\">\n            <path\n              d=\"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z\">\n            </path>\n            <polyline points=\"3.27 6.96 12 12.01 20.73 6.96\"></polyline>\n            <line x1=\"12\" y1=\"22.08\" x2=\"12\" y2=\"12\"></line>\n          </svg>\n        </div>\n        <div class=\"\
    header-info\">\n          <h1>Cybx AI</h1>\n          <p>Your intelligent flight search assistant</p>\n        </div>\n        <div class=\"user-menu\">\n          <span id=\"userDisplay\" class=\"user-name\"></span>\n          <button id=\"logoutBtn\" class=\"logout-btn\">Logout</button>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"chat-container\" id=\"chatContainer\">\n      <div class=\"welcome-message\">\n        <div class=\"welcome-icon\">✈️</div>\n        <h2>Welcome to Cybx AI</h2>\n        <p>I can help you find flights. Try asking something like:</p>\n        <div class=\"suggestions\">\n          <button class=\"suggestion-chip\"\n            onclick=\"sendSuggestion('I want a one-way flight from SFO to JFK on March 15, 2026 for 1 adult')\">\n            Find flights from SFO to JFK\n          </button>\n          <button class=\"suggestion-chip\"\n            onclick=\"sendSuggestion('Show me flights from LAX to Miami next week for 2 passengers')\">\n  \
    \          LAX to Miami for 2 people\n          </button>\n          <button class=\"suggestion-chip\"\n            onclick=\"sendSuggestion('I need a round trip from New York to London in April')\">\n            Round trip NY to London\n          </button>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"chat-input-container\">\n      <form id=\"chatForm\" class=\"chat-form\">\n        <input type=\"text\" id=\"chatInput\" class=\"chat-input\"\n          placeholder=\"Ask about flights, e.g., 'I want to fly from SFO to JFK tomorrow'\" autocomplete=\"off\" />\n        <button type=\"submit\" class=\"send-button\" id=\"sendButton\">\n          <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"\n            stroke-linecap=\"round\" stroke-linejoin=\"round\">\n            <line x1=\"22\" y1=\"2\" x2=\"11\" y2=\"13\"></line>\n            <polygon points=\"22 2 15 22 11 13 2 9 22 2\"></polygon>\n          </svg>\n\
    \        </button>\n      </form>\n    </div>\n  </div>\n\n  <script src=\"/static/auth.js\"></script>\n  <script src=\"/static/app.js\"></script>\n</body>\n\n</html>"
  login.html: "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>Login - Cybx AI Gateway</title>\n  <script src=\"/config.js\"></script>\n  <link rel=\"stylesheet\" href=\"/static/styles.css\">\n  <style>\n    body {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      min-height: 100vh;\n      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n      margin: 0;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;\n    }\n\n    .login-container {\n      background: white;\n      border-radius: 16px;\n      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);\n      padding: 3rem;\n      width: 100%;\n      max-width: 420px;\n      animation: slideUp 0.4s ease-out;\n    }\n\n    @keyframes slideUp {\n      from {\n        opacity: 0;\n        transform: translateY(30px);\n      }\n\
    \n      to {\n        opacity: 1;\n        transform: translateY(0);\n      }\n    }\n\n    .login-header {\n      text-align: center;\n      margin-bottom: 2rem;\n    }\n\n    .login-header h1 {\n      font-size: 1.75rem;\n      font-weight: 700;\n      color: #1a202c;\n      margin: 0 0 0.5rem 0;\n    }\n\n    .login-header p {\n      font-size: 0.95rem;\n      color: #718096;\n      margin: 0;\n    }\n\n    .logo {\n      width: 64px;\n      height: 64px;\n      margin: 0 auto 1rem;\n      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n      border-radius: 16px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n    }\n\n    .logo svg {\n      width: 36px;\n      height: 36px;\n      stroke: white;\n    }\n\n    .form-group {\n      margin-bottom: 1.5rem;\n    }\n\n    .form-group label {\n      display: block;\n      font-size: 0.9rem;\n      font-weight: 600;\n      color: #2d3748;\n      margin-bottom: 0.5rem;\n    }\n\n    .form-group\
    \ input {\n      width: 100%;\n      padding: 0.875rem 1rem;\n      font-size: 1rem;\n      border: 2px solid #e2e8f0;\n      border-radius: 8px;\n      box-sizing: border-box;\n      transition: all 0.2s;\n      outline: none;\n    }\n\n    .form-group input:focus {\n      border-color: #667eea;\n      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);\n    }\n\n    .form-group input::placeholder {\n      color: #a0aec0;\n    }\n\n    .btn-login {\n      width: 100%;\n      padding: 1rem;\n      font-size: 1rem;\n      font-weight: 600;\n      color: white;\n      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n      border: none;\n      border-radius: 8px;\n      cursor: pointer;\n      transition: all 0.2s;\n      outline: none;\n    }\n\n    .btn-login:hover:not(:disabled) {\n      transform: translateY(-2px);\n      box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);\n    }\n\n    .btn-login:disabled {\n      opacity: 0.6;\n      cursor: not-allowed;\n    }\n\n    .auth0-section\
    \ {\n      margin: 2rem 0;\n      padding: 1.5rem;\n      background: #f7fafc;\n      border-radius: 8px;\n      border: 2px dashed #cbd5e0;\n    }\n\n    .auth0-section h3 {\n      font-size: 0.9rem;\n      font-weight: 600;\n      color: #2d3748;\n      margin: 0 0 1rem 0;\n      text-align: center;\n    }\n\n    .divider {\n      display: flex;\n      align-items: center;\n      margin: 1.5rem 0;\n      color: #a0aec0;\n      font-size: 0.85rem;\n    }\n\n    .divider::before,\n    .divider::after {\n      content: '';\n      flex: 1;\n      height: 1px;\n      background: #e2e8f0;\n    }\n\n    .divider span {\n      padding: 0 1rem;\n    }\n\n    .alert {\n      padding: 1rem;\n      border-radius: 8px;\n      margin-bottom: 1.5rem;\n      font-size: 0.9rem;\n      display: none;\n    }\n\n    .alert.error {\n      background: #fed7d7;\n      color: #c53030;\n      border: 1px solid #fc8181;\n    }\n\n    .alert.success {\n      background: #c6f6d5;\n      color: #2f855a;\n    \
    \  border: 1px solid #9ae6b4;\n    }\n\n    .alert.show {\n      display: block;\n      animation: slideDown 0.3s ease-out;\n    }\n\n    @keyframes slideDown {\n      from {\n        opacity: 0;\n        transform: translateY(-10px);\n      }\n\n      to {\n        opacity: 1;\n        transform: translateY(0);\n      }\n    }\n\n    .spinner {\n      display: inline-block;\n      width: 16px;\n      height: 16px;\n      border: 2px solid rgba(255, 255, 255, 0.3);\n      border-radius: 50%;\n      border-top-color: white;\n      animation: spin 0.8s linear infinite;\n      margin-right: 0.5rem;\n    }\n\n    @keyframes spin {\n      to {\n        transform: rotate(360deg);\n      }\n    }\n\n    .footer-links {\n      text-align: center;\n      margin-top: 1.5rem;\n      font-size: 0.85rem;\n      color: #718096;\n    }\n\n    .footer-links a {\n      color: #667eea;\n      text-decoration: none;\n    }\n\n    .footer-links a:hover {\n      text-decoration: underline;\n    }\n  </style>\n\
    </head>\n\n<body>\n  <div class=\"login-container\">\n    <div class=\"login-header\">\n      <div class=\"logo\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"\n          stroke-linecap=\"round\" stroke-linejoin=\"round\">\n          <path\n            d=\"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z\">\n          </path>\n          <polyline points=\"3.27 6.96 12 12.01 20.73 6.96\"></polyline>\n          <line x1=\"12\" y1=\"22.08\" x2=\"12\" y2=\"12\"></line>\n        </svg>\n      </div>\n      <h1>Welcome to Cybx AI Gateway</h1>\n      <p>Sign in to access the platform</p>\n    </div>\n\n    <div id=\"alert\" class=\"alert\"></div>\n\n    <!-- Auth0 Login Section -->\n    <div class=\"auth0-section\">\n      <h3>\U0001F510 Auth0 Login (Production)</h3>\n      <p style=\"font-size: 0.9rem; color: #718096; margin-bottom: 1rem;\"\
    >\n        Click below to sign in via Auth0 Universal Login\n      </p>\n      <button type=\"button\" class=\"btn-login\" id=\"auth0LoginBtn\" onclick=\"loginWithAuth0()\">\n        Sign In with Auth0\n      </button>\n    </div>\n\n    <div class=\"divider\">\n      <span>OR</span>\n    </div>\n\n    <!-- Direct Login Section (for testing) -->\n    <form id=\"directLoginForm\">\n      <div class=\"form-group\">\n        <label for=\"sessionToken\">Session Token (Testing)</label>\n        <input type=\"text\" id=\"sessionToken\" placeholder=\"Direct session token for testing\">\n      </div>\n      <button type=\"submit\" class=\"btn-login\" id=\"directSubmitBtn\">\n        Sign In with Token\n      </button>\n    </form>\n\n    <div class=\"footer-links\">\n      Need help? <a href=\"mailto:support@cybx.ai\">Contact Support</a>\n    </div>\n  </div>\n\n  <script>\n    const API_BASE = window.location.origin;\n    const NOETL_API = window.location.origin.replace(':8080', ':8082'); //\
    \ NoETL API for testing\n    const AUTH_LOGIN_URL = `${API_BASE}/api/auth/login`;\n    const AUTH_VALIDATE_URL = `${NOETL_API}/api/execute`; // Direct to NoETL playbook\n\n    // Check if already logged in\n    window.addEventListener('DOMContentLoaded', async () => {\n      const token = localStorage.getItem('session_token');\n      if (token) {\n        // Don't auto-validate, just redirect to dashboard\n        window.location.href = '/dashboard.html';\n        return;\n      }\n    });\n\n    // Auth0 Universal Login redirect\n    function loginWithAuth0() {\n      const auth0Domain = auth0Config.domain;\n      const clientId = auth0Config.clientId;\n      const redirectUri = auth0Config.redirectUri;\n      \n      // Build Auth0 authorization URL - request id_token for userinfo access\n      const authUrl = `https://${auth0Domain}/authorize?` +\n        `response_type=id_token token&` +\n        `client_id=${clientId}&` +\n        `redirect_uri=${encodeURIComponent(redirectUri)}&`\
    \ +\n        `scope=openid profile email&` +\n        `nonce=${Math.random().toString(36).substring(7)}`;\n      \n      // Redirect to Auth0 login page\n      window.location.href = authUrl;\n    }\n\n    // Handle Auth0 callback (token in URL hash)\n    window.addEventListener('DOMContentLoaded', async () => {\n      // Check if we have a token from Auth0 redirect\n      const hash = window.location.hash;\n      if (hash && (hash.includes('access_token=') || hash.includes('id_token='))) {\n        const params = new URLSearchParams(hash.substring(1));\n        const accessToken = params.get('access_token');\n        const idToken = params.get('id_token');\n        \n        if (accessToken && idToken) {\n          showAlert('Processing Auth0 login...', 'info');\n          \n          try {\n            // Call auth0_login playbook with the ID token (can be validated at /userinfo)\n            console.log('DEBUG: Calling auth0_login with id_token:', idToken.substring(0, 20) + '...');\n\
    \            const response = await fetch(`${NOETL_API}/api/execute`, {\n              method: 'POST',\n              headers: {'Content-Type': 'application/json'},\n              body: JSON.stringify({\n                path: 'api_integration/auth0/auth0_login',\n                payload: {\n                  auth0_token: idToken,\n                  client_ip: '127.0.0.1'\n                }\n              })\n            });\n            \n            if (response.ok) {\n              const data = await response.json();\n              const executionId = data.execution_id;\n              console.log('DEBUG: Playbook execution started, ID:', executionId);\n              \n              showAlert('Auth0 login successful! Fetching session...', 'info');\n              \n              // Wait a bit for playbook to complete before polling\n              await new Promise(resolve => setTimeout(resolve, 2000));\n              \n              // Check execution status first\n              const\
    \ statusResponse = await fetch(`${NOETL_API}/api/executions/${executionId}`);\n              if (statusResponse.ok) {\n                const statusData = await statusResponse.json();\n                console.log('DEBUG: Execution status:', statusData.status);\n                console.log('DEBUG: Full execution data:', statusData);\n              }\n              \n              // Poll for execution completion and get session token\n              let attempts = 0;\n              const maxAttempts = 20;\n              let sessionToken = null;\n              \n              while (attempts < maxAttempts && !sessionToken) {\n                await new Promise(resolve => setTimeout(resolve, 500));\n                attempts++;\n                \n                try {\n                  // Query database for session token using id_token (which we passed to playbook)\n                  const queryPayload = {\n                    query: `SELECT session_token FROM auth.sessions WHERE auth0_token\
    \ = '${idToken}' ORDER BY created_at DESC LIMIT 1`,\n                    connection_string: 'postgresql://demo:demo@postgres.postgres.svc.cluster.local:5432/demo_noetl'\n                  };\n                  console.log(`DEBUG: Query attempt ${attempts}:`, queryPayload.query.substring(0, 100) + '...');\n                  \n                  const sessionResponse = await fetch(`${NOETL_API}/api/postgres/execute`, {\n                    method: 'POST',\n                    headers: {'Content-Type': 'application/json'},\n                    body: JSON.stringify(queryPayload)\n                  });\n                  \n                  if (sessionResponse.ok) {\n                    const sessionData = await sessionResponse.json();\n                    console.log(`DEBUG: Session query response (attempt ${attempts}):`, sessionData);\n                    \n                    if (sessionData.result && sessionData.result.length > 0) {\n                      // Result is array of arrays:\
    \ [[\"session_token_value\"]]\n                      sessionToken = sessionData.result[0][0];\n                      console.log('DEBUG: Found session token:', sessionToken);\n                      break;\n                    } else {\n                      console.log(`DEBUG: Attempt ${attempts}/${maxAttempts}: No session found yet, result:`, sessionData.result);\n                    }\n                  } else {\n                    console.error('DEBUG: Session query failed:', await sessionResponse.text());\n                  }\n                } catch (err) {\n                  console.error('DEBUG: Error fetching session:', err);\n                }\n              }\n              \n              if (sessionToken) {\n                localStorage.setItem('session_token', sessionToken);\n                console.log('DEBUG: Session token stored in localStorage');\n                showAlert('Login complete! Redirecting...', 'success');\n                \n                setTimeout(()\
    \ => {\n                  window.location.href = '/dashboard.html';\n                }, 1000);\n              } else {\n                console.error('DEBUG: Failed to get session token after', maxAttempts, 'attempts');\n                throw new Error('Session token not found after login');\n              }\n            } else {\n              throw new Error('Failed to create NoETL session');\n            }\n          } catch (error) {\n            console.error('Auth0 callback error:', error);\n            showAlert('Auth0 login failed: ' + error.message, 'error');\n            // Clean URL hash\n            window.location.hash = '';\n          }\n          return;\n        }\n      }\n      \n      // Check if already logged in with session token\n      const token = localStorage.getItem('session_token');\n      if (token) {\n        window.location.href = '/dashboard.html';\n        return;\n      }\n    });\n\n    // Direct token login form handler\n    document.getElementById('directLoginForm').addEventListener('submit',\
    \ async (e) => {\n      e.preventDefault();\n\n      const sessionToken = document.getElementById('sessionToken').value.trim();\n\n      if (!sessionToken) {\n        showAlert('Please enter a session token', 'error');\n        return;\n      }\n\n      const submitBtn = document.getElementById('directSubmitBtn');\n      submitBtn.disabled = true;\n      submitBtn.innerHTML = '<span class=\"spinner\"></span> Validating...';\n\n      try {\n        const valid = await validateSession(sessionToken);\n\n        if (valid) {\n          // Session is valid, store and redirect\n          localStorage.setItem('session_token', sessionToken);\n          showAlert('Session validated successfully!', 'success');\n\n          setTimeout(() => {\n            window.location.href = '/dashboard.html';\n          }, 1000);\n        } else {\n          throw new Error('Invalid or expired session token');\n        }\n      } catch (error) {\n        console.error('Direct login error:', error);\n      \
    \  showAlert(error.message || 'Token validation failed', 'error');\n        submitBtn.disabled = false;\n        submitBtn.innerHTML = 'Sign In with Token';\n      }\n    });\n\n    // Validate session helper\n    async function validateSession(token) {\n      try {\n        const response = await fetch(AUTH_VALIDATE_URL, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({\n            path: 'api_integration/auth0/auth0_validate_session',\n            workload: {\n              session_token: token\n            }\n          }),\n        });\n\n        const data = await response.json();\n        \n        // For NoETL playbook execution, wait for result\n        if (data.execution_id) {\n          // Wait 2 seconds for playbook to complete\n          await new Promise(resolve => setTimeout(resolve, 2000));\n          \n          // Check execution result (simplified for demo)\n          //\
    \ In production, poll the execution status endpoint\n          return true; // Assume success if execution started\n        }\n\n        // For direct gateway API response\n        if (data.valid && data.user) {\n          localStorage.setItem('user_info', JSON.stringify(data.user));\n          return true;\n        }\n\n        return false;\n      } catch (error) {\n        console.error('Session validation error:', error);\n        return false;\n      }\n    }\n\n    // Show alert helper\n    function showAlert(message, type) {\n      const alert = document.getElementById('alert');\n      alert.textContent = message;\n      alert.className = `alert ${type} show`;\n\n      setTimeout(() => {\n        alert.classList.remove('show');\n      }, 5000);\n    }\n  </script>\n</body>\n\n</html>\n"
  styles.css: "* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\n:root {\n  --primary-color: #667eea;\n  --primary-dark: #5568d3;\n  --secondary-color: #764ba2;\n  --success-color: #48bb78;\n  --error-color: #f56565;\n  --text-primary: #2d3748;\n  --text-secondary: #718096;\n  --bg-light: #f7fafc;\n  --bg-white: #ffffff;\n  --border-color: #e2e8f0;\n  --shadow-sm: 0 1px 3px 0 rgba(0, 0, 0, 0.1);\n  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\n  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);\n}\n\nbody {\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  min-height: 100vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 20px;\n}\n\n.container {\n  width: 100%;\n  max-width: 900px;\n  height: 90vh;\n  max-height: 800px;\n  background: var(--bg-white);\n  border-radius: 16px;\n  box-shadow: var(--shadow-lg);\n\
    \  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n}\n\n/* Header */\n.chat-header {\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  color: white;\n  padding: 24px;\n  box-shadow: var(--shadow-md);\n}\n\n.header-content {\n  display: flex;\n  align-items: center;\n  gap: 16px;\n  justify-content: space-between;\n}\n\n.avatar {\n  width: 56px;\n  height: 56px;\n  background: rgba(255, 255, 255, 0.2);\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  backdrop-filter: blur(10px);\n}\n\n.avatar svg {\n  width: 32px;\n  height: 32px;\n}\n\n.header-info h1 {\n  font-size: 24px;\n  font-weight: 700;\n  margin-bottom: 4px;\n}\n\n.header-info p {\n  font-size: 14px;\n  opacity: 0.9;\n}\n\n/* User menu */\n.user-menu {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  margin-left: auto;\n}\n\n.user-name {\n  font-size: 14px;\n  font-weight: 500;\n  opacity: 0.95;\n}\n\n.logout-btn {\n  padding: 8px 16px;\n\
    \  font-size: 14px;\n  font-weight: 600;\n  color: white;\n  background: rgba(255, 255, 255, 0.2);\n  border: 1px solid rgba(255, 255, 255, 0.3);\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.2s;\n  backdrop-filter: blur(10px);\n}\n\n.logout-btn:hover {\n  background: rgba(255, 255, 255, 0.3);\n  border-color: rgba(255, 255, 255, 0.5);\n  transform: translateY(-1px);\n}\n\n/* Chat Container */\n.chat-container {\n  flex: 1;\n  overflow-y: auto;\n  padding: 24px;\n  background: var(--bg-light);\n}\n\n.chat-container::-webkit-scrollbar {\n  width: 8px;\n}\n\n.chat-container::-webkit-scrollbar-track {\n  background: transparent;\n}\n\n.chat-container::-webkit-scrollbar-thumb {\n  background: var(--border-color);\n  border-radius: 4px;\n}\n\n.chat-container::-webkit-scrollbar-thumb:hover {\n  background: var(--text-secondary);\n}\n\n/* Welcome Message */\n.welcome-message {\n  text-align: center;\n  padding: 40px 20px;\n  max-width: 600px;\n  margin: 0 auto;\n}\n\n.welcome-icon\
    \ {\n  font-size: 64px;\n  margin-bottom: 16px;\n}\n\n.welcome-message h2 {\n  font-size: 28px;\n  color: var(--text-primary);\n  margin-bottom: 8px;\n}\n\n.welcome-message p {\n  color: var(--text-secondary);\n  margin-bottom: 24px;\n  font-size: 16px;\n}\n\n.suggestions {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n  margin-top: 24px;\n}\n\n.suggestion-chip {\n  background: var(--bg-white);\n  border: 2px solid var(--border-color);\n  color: var(--text-primary);\n  padding: 14px 20px;\n  border-radius: 12px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  font-size: 14px;\n  font-weight: 500;\n}\n\n.suggestion-chip:hover {\n  border-color: var(--primary-color);\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  color: white;\n  transform: translateY(-2px);\n  box-shadow: var(--shadow-md);\n}\n\n/* Messages */\n.message {\n  display: flex;\n  margin-bottom: 20px;\n  animation: fadeInUp 0.3s ease;\n}\n\n@keyframes fadeInUp {\n  from {\n    opacity:\
    \ 0;\n    transform: translateY(10px);\n  }\n\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n.message.user {\n  justify-content: flex-end;\n}\n\n.message-content {\n  max-width: 70%;\n  padding: 16px 20px;\n  border-radius: 16px;\n  position: relative;\n}\n\n.message.user .message-content {\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  color: white;\n  border-bottom-right-radius: 4px;\n}\n\n.message.assistant .message-content {\n  background: var(--bg-white);\n  color: var(--text-primary);\n  border: 1px solid var(--border-color);\n  border-bottom-left-radius: 4px;\n  box-shadow: var(--shadow-sm);\n}\n\n.message-text {\n  line-height: 1.6;\n  word-wrap: break-word;\n}\n\n.message-text p {\n  margin-bottom: 12px;\n}\n\n.message-text p:last-child {\n  margin-bottom: 0;\n}\n\n.message-text h3 {\n  margin-top: 16px;\n  margin-bottom: 8px;\n  font-size: 18px;\n}\n\n.message-text ul {\n  margin-left: 20px;\n  margin-bottom: 12px;\n}\n\n.message-text\
    \ li {\n  margin-bottom: 6px;\n}\n\n.message-text strong {\n  font-weight: 600;\n}\n\n.message-time {\n  font-size: 11px;\n  opacity: 0.7;\n  margin-top: 6px;\n}\n\n/* Typing Indicator */\n.typing-indicator {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 16px 20px;\n  background: var(--bg-white);\n  border: 1px solid var(--border-color);\n  border-radius: 16px;\n  border-bottom-left-radius: 4px;\n  max-width: 70px;\n  box-shadow: var(--shadow-sm);\n}\n\n.typing-dot {\n  width: 8px;\n  height: 8px;\n  background: var(--text-secondary);\n  border-radius: 50%;\n  animation: typingAnimation 1.4s infinite;\n}\n\n.typing-dot:nth-child(2) {\n  animation-delay: 0.2s;\n}\n\n.typing-dot:nth-child(3) {\n  animation-delay: 0.4s;\n}\n\n@keyframes typingAnimation {\n\n  0%,\n  60%,\n  100% {\n    transform: translateY(0);\n    opacity: 0.7;\n  }\n\n  30% {\n    transform: translateY(-10px);\n    opacity: 1;\n  }\n}\n\n/* Error Message */\n.error-message {\n  background: #fff5f5;\n\
    \  border: 1px solid #feb2b2;\n  color: var(--error-color);\n  padding: 16px 20px;\n  border-radius: 12px;\n  margin-bottom: 20px;\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n\n.error-icon {\n  font-size: 20px;\n}\n\n/* Input Container */\n.chat-input-container {\n  padding: 20px 24px;\n  background: var(--bg-white);\n  border-top: 1px solid var(--border-color);\n}\n\n.chat-form {\n  display: flex;\n  gap: 12px;\n  align-items: center;\n}\n\n.chat-input {\n  flex: 1;\n  padding: 14px 20px;\n  border: 2px solid var(--border-color);\n  border-radius: 12px;\n  font-size: 15px;\n  color: var(--text-primary);\n  transition: all 0.3s ease;\n  outline: none;\n}\n\n.chat-input:focus {\n  border-color: var(--primary-color);\n  box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);\n}\n\n.chat-input::placeholder {\n  color: var(--text-secondary);\n}\n\n.send-button {\n  width: 48px;\n  height: 48px;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  border: none;\n \
    \ border-radius: 12px;\n  color: white;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.3s ease;\n  box-shadow: var(--shadow-sm);\n}\n\n.send-button:hover {\n  transform: translateY(-2px);\n  box-shadow: var(--shadow-md);\n}\n\n.send-button:active {\n  transform: translateY(0);\n}\n\n.send-button:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n  transform: none;\n}\n\n.send-button svg {\n  width: 20px;\n  height: 20px;\n}\n\n/* Execution Info */\n.execution-info {\n  font-size: 12px;\n  opacity: 0.8;\n  margin-top: 8px;\n  padding-top: 8px;\n  border-top: 1px solid rgba(255, 255, 255, 0.2);\n}\n\n.message.assistant .execution-info {\n  border-top: 1px solid var(--border-color);\n}\n\n/* Status Badge */\n.status-badge {\n  display: inline-block;\n  padding: 2px 8px;\n  border-radius: 6px;\n  font-size: 11px;\n  font-weight: 600;\n  text-transform: uppercase;\n  margin-left: 8px;\n}\n\n.status-badge.success {\n  background:\
    \ rgba(72, 187, 120, 0.2);\n  color: var(--success-color);\n}\n\n.status-badge.running {\n  background: rgba(102, 126, 234, 0.2);\n  color: var(--primary-color);\n}\n\n.status-badge.error {\n  background: rgba(245, 101, 101, 0.2);\n  color: var(--error-color);\n}\n\n/* Responsive Design */\n@media (max-width: 768px) {\n  body {\n    padding: 0;\n  }\n\n  .container {\n    height: 100vh;\n    max-height: none;\n    border-radius: 0;\n  }\n\n  .chat-header {\n    padding: 20px;\n  }\n\n  .header-info h1 {\n    font-size: 20px;\n  }\n\n  .message-content {\n    max-width: 85%;\n  }\n\n  .welcome-message h2 {\n    font-size: 24px;\n  }\n\n  .suggestions {\n    gap: 10px;\n  }\n\n  .suggestion-chip {\n    padding: 12px 16px;\n    font-size: 13px;\n  }\n}"
kind: ConfigMap
metadata:
  name: gateway-ui-files
  namespace: gateway
