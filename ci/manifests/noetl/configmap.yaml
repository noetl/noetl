apiVersion: v1
kind: ConfigMap
metadata:
  name: noetl-config
  namespace: noetl
  labels:
    app: noetl
data:
  # Timezone - Must match Postgres timezone for correct timestamp handling
  # Change to America/Chicago or other timezone if needed (must also update postgres configmap)
  TZ: "UTC"
  LOG_LEVEL: "INFO"
  PYTHONPATH: "/opt/noetl"
  NOETL_DATA_DIR: "/opt/noetl/data"
  NOETL_RUN_MODE: "server"
  NOETL_ENABLE_UI: "true"
  NOETL_DEBUG: "true"
  NOETL_HTTP_MOCK_LOCAL: "false"
  NOETL_HOST: "0.0.0.0"
  NOETL_PORT: "8082"
  NOETL_SERVER_URL: "http://noetl.noetl.svc.cluster.local:8082"
  NOETL_SERVER_NAME: "server-k8s"
  NOETL_SERVER: "uvicorn"
  NOETL_SERVER_WORKERS: "1"
  NOETL_SERVER_RELOAD: "false"
  NOETL_AUTO_RECREATE_RUNTIME: "true"
  NOETL_DROP_SCHEMA: "false"
  NOETL_SCHEMA_VALIDATE: "true"
  NOETL_HEARTBEAT_RETRY_AFTER: "3"
  NOETL_RUNTIME_SWEEP_INTERVAL: "15"
  NOETL_RUNTIME_OFFLINE_SECONDS: "60"
  NOETL_DISABLE_METRICS: "true"
  NOETL_SERVER_METRICS_INTERVAL: "60"
  NOETL_VICTORIALOGS_URL: "http://vmlogs-single-server.vmlogs.svc.cluster.local:9428"
  NOETL_LOG_FORMAT: "victorialogs"
  POSTGRES_USER: "demo"
  POSTGRES_DB: "demo_noetl"
  POSTGRES_HOST: "postgres.postgres.svc.cluster.local"
  POSTGRES_PORT: "5432"
  POSTGRES_SCHEMA: "public"
  NOETL_USER: "noetl"
  NOETL_SCHEMA: "noetl"
  NOETL_DB_STARTUP_TIMEOUT: "180"
  NOETL_DB_RETRY_INTERVAL: "5"
  # NATS Configuration
  NATS_URL: "nats://noetl:noetl@nats.nats.svc.cluster.local:4222"
  NATS_USER: "noetl"
  NATS_PASSWORD: "noetl"
  NATS_STREAM: "NOETL_COMMANDS"
  NATS_CONSUMER: "noetl_worker_pool"
  NATS_SUBJECT: "noetl.commands"
