{
  "name": "ib_gateway",
  "type": "interactive_brokers_gateway",
  "description": "IBKR Client Portal Gateway credentials with TOTP secret",
  "tags": ["ib", "interactive_brokers", "gateway", "totp", "mfa"],
  "data": {
    "username": "YOUR_IBKR_USERNAME",
    "password": "YOUR_IBKR_PASSWORD",
    "totp_secret": "YOUR_BASE32_TOTP_SECRET",
    "account_id": "YOUR_ACCOUNT_ID",
    "environment": "paper",
    "gateway_url": "https://ibkr-client-portal.ibkr.svc.cluster.local:5000"
  },
  "notes": {
    "totp_secret_howto": [
      "1. Go to IBKR Account Management → Security → Secure Login System",
      "2. Add new authentication device or modify existing",
      "3. When shown QR code, click 'Can't scan?' to see the secret key",
      "4. Copy the base32 secret (e.g., JBSWY3DPEHPK3PXP)",
      "5. Store it in this credential file as totp_secret"
    ],
    "gateway_deployment": [
      "Deploy Client Portal Gateway to K8s:",
      "  noetl run automation/ibkr/deploy.yaml",
      "Or run locally:",
      "  1. Download from https://www.interactivebrokers.com/en/trading/ib-api.php",
      "  2. Extract and run: ./bin/run.sh root/conf.yaml",
      "  3. Login via: https://localhost:15000"
    ],
    "api_docs": "https://www.interactivebrokers.com/api/doc.html"
  }
}
