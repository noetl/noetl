name: Check PR
on:
  workflow_dispatch:
permissions:
  id-token: write
  contents: read
  pull-requests: read
  statuses: write
jobs:
  check_pr:
    name: Validate PR title
    runs-on: ubuntu-latest
    steps:
      - uses: amannn/action-semantic-pull-request@v5.2.0
        with:
          types: |
            fix
            feat
            docs
            ci
            chore
          requireScope: false
          subjectPattern: ^[A-Z].+$
          subjectPatternError: >-
            The subject "{subject}" found in the pull request title "{title}" didn't
            match the configured pattern "^[A-Z].+$".
            Example: "Add new cool feature"
          wip: true
          validateSingleCommit: false
        env:
          GITHUB_TOKEN: ${{ google_secret_manager.GITHUB_TOKEN }}
